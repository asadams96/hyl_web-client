<!--<div class="card mb-3">
  <div class="card-header bg-gradient-light text-center">
    <a routerLink="/items/{{ id }}">
      <small class="text-primary font-italic font-weight-bold">{{ name  }}</small>
    </a>
  </div>
</div>-->
<div class="card shadow m-1 mt-2">
  <!-- Card Header - Dropdown -->
  <div class="card-header bg-gradient-light py-0 d-flex flex-row align-items-center">
    <div class="col-lg-11 col-md-11 px-0">
      <a style="text-decoration: none" [href]="'#collapseItem'+id" class="d-block py-2 text-truncate" data-toggle="collapse" role="button" aria-expanded="true">
        <small class="font-weight-bold font-italic text-primary">{{ name }}</small>
      </a>
    </div>

    <!-- Dropdown Item -->
    <div class="dropdown no-arrow">
      <!-- Bouton menu animé -->
      <a class="dropdown-toggle" href="#" role="button" [id]="'dropdownItem'+id" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="fas fa-ellipsis-v fa-sm fa-fw text-primary"></i>
      </a>
      <!-- Menu annimé -->
      <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" [attr.aria-labelledby]="'dropdownItem'+id">
        <div class="dropdown-header">{{ name }}</div>
        <a class="dropdown-item" data-toggle="modal" [attr.data-target]="'#addSubItemModal'+id" href="#">
          Ajouter un exemplaire
        </a>
        <a class="dropdown-item" data-toggle="modal" [attr.data-target]="'#removeSubItemModal'+id" href="#">
          Supprimer un exemplaire
        </a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" data-toggle="modal" [attr.data-target]="'#renameItemModal'+id" href="#">
          Renommer <span class="font-weight-bolder">{{ name }}</span>
        </a>
        <a class="dropdown-item" data-toggle="modal" [attr.data-target]="'#moveItemModal'+id" href="#">
          Déplacer <span class="font-weight-bolder">{{ name }}</span>
        </a>
        <a class="dropdown-item" data-toggle="modal" [attr.data-target]="'#deleteItemModal'+id" href="#">
          Supprimer <span class="font-weight-bolder">{{ name }}</span>
        </a>
      </div>
    </div>
  </div>
  <!-- Item Body -->
  <div class="collapse" [id]="'collapseItem'+id">
    <div class="card-body bg-light py-1">
      <!-- SUBITEM -->
      <div class="card-deck">
      <app-sub-item *ngFor="let subItem of subItems"
                    [reference]="subItem.reference"></app-sub-item>
      </div>
      <!-- EXEMPLE DIAPORAMA POSSIBLE -> Si diapora modifier urlItem: string -> urlItem: string[]
      Ou diaporama pour les subItem ??
      <div [id]="'carouselExampleIndicators'+id" class="carousel carousel-fade" data-ride="carousel">
        <ol class="carousel-indicators">
          <li [attr.data-target]="'#carouselExampleIndicators'+id" data-slide-to="0" class="active"></li>
          <li [attr.data-target]="'#carouselExampleIndicators'+id" data-slide-to="1"></li>
          <li [attr.data-target]="'#carouselExampleIndicators'+id" data-slide-to="2"></li>
          <li [attr.data-target]="'#carouselExampleIndicators'+id" data-slide-to="4"></li>
        </ol>
        <div class="carousel-inner">

          <div class="carousel-item active">
            <img class="border border-dark d-block m-auto" src="https://www.jojolabrocante.com/ressources/catalogue_etendu_13/items/objets_anciens-man2.jpg" width="200" alt="First slide">
          </div>
          <div class="carousel-item">
            <img class="border border-dark d-block m-auto" src="https://www.zephyr3d.com/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/l/a/lampe-en-verre-horizontale-gravure-3d.jpg" width="200" alt="Second slide">
          </div>
          <div class="carousel-item">
            <img class="border border-dark d-block m-auto" src="http://www.objets-pub-express.com/media/mug_promo__rouge5__071375100_0724_21102010.jpg" width="200" alt="Third slide">
          </div>
          <div class="carousel-item">
            <img class="border border-dark d-block m-auto" src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Square_200x200.png" width="200" alt="Forth slide">
          </div>
        </div>
        <a class="carousel-control-prev" [href]="'#carouselExampleIndicators'+id" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" [href]="'#carouselExampleIndicators'+id" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>-->
    </div>
  </div>
</div>

<!-- ******************************************************** MODALS *********************************************** -->
<!-- rename item Modal-->
<div class="modal fade" [id]="'renameItemModal'+id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel2">
          Renommer <span class="font-weight-bolder">{{ name }}</span> ?
        </h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <form [formGroup]="renameItemForm">
        <div class="modal-body text-center">
          <div class="form-group">
            <input class="form-control form-control-user" formControlName="name" id="nameRename" type="text"
                   placeholder="Saisir le nouveau nom de '{{ name }}'" [maxlength]="maxlengthItemName">
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Annuler</button>
          <button class="btn btn-primary" type="submit" data-dismiss="modal" (click)="onSubmitRenameItemForm()" [disabled]="!renameItemForm.valid">Renommer</button>
        </div>
      </form>
    </div>
  </div>
</div>



<!-- Move Item Modal-->
<div class="modal fade" [id]="'moveItemModal'+id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel5">
          Déplacer <span class="font-weight-bolder">{{ name }}</span> ?
        </h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <form [formGroup]="moveItemForm">
        <div class="modal-body text-center">
          <div class="form-group">
            <select class="form-control custom-select text-muted" formControlName="categoryMove" id="categoryMove">
              <option value="" disabled="disabled" hidden="hidden">Choisir la catégorie de destination</option>
              <option *ngFor="let pCategory of getFullCategoriesInOneArray()" [value]="pCategory.id">{{ pCategory.name }}</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Annuler</button>
          <button class="btn btn-primary" type="submit" data-dismiss="modal" (click)="onSubmitMoveItemForm()" [disabled]="!moveItemForm.valid">Déplacer {{ name }}</button>
        </div>
      </form>
    </div>
  </div>
</div>



<!-- delete item Modal-->
<div class="modal fade" [id]="'deleteItemModal'+id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel3">
          Supprimer <span class="font-weight-bolder">{{ name }}</span> ?
        </h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <form [formGroup]="deleteItemForm">
        <div class="modal-body">
          <div>Etes-vous sur de vouloir supprimer <span class="font-weight-bolder">{{ name }}</span> ?</div>
          <div class="text-danger">Tous les exemplaires de cet objet ainsi que les prets qui y sont associés seront également supprimés.</div>
          <div>
            <input class="mr-2" type="checkbox" formControlName="checkbox">
            <span class="font-weight-bolder">Cocher</span>
            la croix puis cliquez sur
            <span class="font-weight-bolder">Supprimer</span>
            pour continuer...
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Annuler</button>
          <button class="btn btn-primary" type="submit" data-dismiss="modal" (click)="onSubmitDeleteItemForm()" [disabled]="!deleteItemForm.valid">Supprimer</button>
        </div>
      </form>
    </div>
  </div>
</div>
